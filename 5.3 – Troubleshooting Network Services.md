
#### 5.3 Given a scenario, troubleshoot common issues with network services.
- Switching issues
  - STP
  - Network loops
  - Root bridge selection
  - Port roles
- Port states
- Incorrect VLAN assignment
- ACLs
- Route selection
- Routing table
  - Default routes
- Address pool exhaustion
- Incorrect default gateway
- Incorrect IP address
- Duplicate IP address
- Incorrect subnet mask

---

## ১. স্প্যানিং ট্রি প্রোটোকল (STP)

এটি একটি মৌলিক নেটওয়ার্ক প্রোটোকল যা সুইচ নেটওয়ার্কে **লুপ তৈরি হওয়াকে প্রতিরোধ** করে।

### A. লুপ কী এবং কেন ক্ষতিকর?
* **সমস্যা:** MAC অ্যাড্রেস স্তরে (Layer 2) ফ্রেমে কোনো "টাইম টু লিভ (TTL)" ফিল্ড না থাকায়, যদি ভুলক্রমে দুটি সুইচের মধ্যে একাধিক সংযোগ তৈরি হয় (লুপ), তবে ফ্রেমগুলি **অনন্তকাল ধরে ঘুরতে থাকে (Looping)**।
* **ফলাফল:** সুইচগুলি দ্রুত ডেটা দিয়ে উপচে পড়ে (Overwhelmed) এবং **নেটওয়ার্ক অচল** হয়ে যায়।

### B. STP কীভাবে কাজ করে?
* **BPDU (Bridge Protocol Data Unit):** সুইচগুলি নিয়মিত (প্রতি ২ সেকেন্ডে) এই বিশেষ ফ্রেমগুলি একে অপরের কাছে পাঠায়। এর মাধ্যমে তারা নেটওয়ার্ক টপোলজির তথ্য আদান-প্রদান করে।
* **Root Bridge নির্বাচন:** STP শুরু হলে, সমস্ত সুইচ মিলে একটি **Root Bridge** নির্বাচন করে। যে সুইচের **Bridge ID** সবচেয়ে কম, সেটি Root Bridge হয়। (Bridge ID ম্যানুয়ালি কমিয়ে Root Bridge নির্ধারণ করা যায়।)
* **পোর্ট ভূমিকা:** Root Bridge নির্বাচিত হওয়ার পর, অন্যান্য সুইচগুলি নিজেদের পোর্টগুলিকে বিভিন্ন ভূমিকায় সেট করে:
    * **Root Port:** Root Bridge-এ যাওয়ার **সেরা পথ**।
    * **Designated Port:** সক্রিয়ভাবে ট্র্যাফিক ফরোয়ার্ড করার জন্য ব্যবহৃত পোর্ট।
    * **Blocked Port (Discarding):** লুপ প্রতিরোধ করার জন্য **অক্ষম** করা পোর্ট। এটি সক্রিয় হয় না, তবে সংযোগ বিচ্ছিন্ন হলে এটি স্বয়ংক্রিয়ভাবে সক্রিয় হয়।

### C. ইন্টারফেস স্টেট (Port States)
STP পোর্টগুলিকে বিভিন্ন ধাপে রাখে:
1.  **Blocking/Discarding:** ট্র্যাফিক ফরোয়ার্ড করে না (লুপ প্রতিরোধ করে)।
2.  **Listening:** BPDU শোনে, কিন্তু ডেটা ফরোয়ার্ড করে না।
3.  **Learning:** MAC অ্যাড্রেস টেবিলে তথ্য যোগ করে, কিন্তু ডেটা ফরোয়ার্ড করে না।
4.  **Forwarding:** সক্রিয়ভাবে ডেটা ফরোয়ার্ড করে।
5.  **Disabled:** অ্যাডমিনিস্ট্রেটর দ্বারা ম্যানুয়ালি বন্ধ করা হয়েছে।

---

## ২. ভি-ল্যান (VLAN) কনফিগারেশন সমস্যা

VLAN হলো একটি একক সুইচের পোর্টগুলিকে একাধিক যৌক্তিক নেটওয়ার্কে (Logical Networks) ভাগ করার পদ্ধতি।

* **সমস্যা:** কোনো ডিভাইসের সংযোগ বিচ্ছিন্ন থাকলে বা ভুল IP অ্যাড্রেস পেলে, প্রথমে **VLAN কনফিগারেশন** পরীক্ষা করা উচিত।
* **অ্যাক্সেস পোর্ট (Access Ports):** সুইচের প্রতিটি ইন্টারফেসকে একটি নির্দিষ্ট **VLAN ID** দেওয়া হয়।
* **ট্রাবলশুটিং:** যদি একটি ডিভাইস সঠিক IP অ্যাড্রেস না পায় বা একই নেটওয়ার্কের অন্য ডিভাইসের সাথে যোগাযোগ করতে না পারে, তবে দেখতে হবে যে তার ফিজিক্যাল পোর্টটি **সঠিক VLAN ID**-এর সাথে সংযুক্ত আছে কিনা।

---

## ৩. অ্যাক্সেস কন্ট্রোল লিস্ট (ACL)

ACL হলো সুইচ বা রাউটারে ট্র্যাফিক **অনুমতি (Allow)** বা **অস্বীকৃত (Deny)** করার জন্য ব্যবহৃত নিয়মের একটি তালিকা।

* **গুরুত্ব:** VLAN এবং রাউটিং কনফিগারেশন সঠিক হওয়ার পরেও যদি প্যাকেট ড্রপ হয়, তবে প্রায়শই ACL ট্র্যাফিক ব্লক করে।
* **কার্যপদ্ধতি:**
    1.  ACL রুলগুলি **উপর থেকে নীচে** পরীক্ষা করা হয়।
    2.  প্রথম রুলটি যদি ট্র্যাফিকের সাথে **মিলে যায় (Match)**, তবে ACL পরীক্ষা করা বন্ধ হয়ে যায় এবং সেই রুলটির সিদ্ধান্ত কার্যকর হয়।
    3.  **নির্দিষ্ট রুল উপরে:** সাধারণত, **বেশি নির্দিষ্ট (Specific)** রুলগুলি তালিকার উপরে রাখা হয়, যাতে সেগুলিকে প্রথমে মেলানো যায়।
* **ডিফল্ট Deny (Implicit Deny):** একটি ACL-এ যদি কোনো ট্র্যাফিক সুনির্দিষ্টভাবে অনুমোদিত না হয়, তবে বেশিরভাগ ডিভাইসের ডিফল্ট নীতি হলো সেই ট্র্যাফিককে **স্বয়ংক্রিয়ভাবে অস্বীকার** করা।
* **সেরা অভ্যাস:** ACL পরিবর্তন করার সময় প্রথমে ACL ফাংশনটি নিষ্ক্রিয় করা উচিত, কারণ একটি ভুল রুল অ্যাডমিনিস্ট্রেটরকেই সুইচ থেকে **লক আউট (Lock Out)** করে দিতে পারে।

---

## ৪. রিয়েল-টাইম ইন্টারভিউ প্রশ্নাবলী (Interview Perspective)

### প্রশ্ন ১: নেটওয়ার্কে STP কেন আবশ্যক? লুপ তৈরি হলে কী হবে?

**উত্তর:**
* **আবশ্যক:** STP আবশ্যক কারণ MAC অ্যাড্রেস স্তরে (Layer 2) ডেটা ফ্রেমে **TTL (Time to Live) ফিল্ড না থাকায়** লুপ তৈরি হলে ফ্রেমগুলি অনন্তকাল ধরে ঘুরতে থাকে।
* **লুপের ফলাফল:** লুপের ফলে **ব্রডকাস্ট স্টর্ম (Broadcast Storm)** সৃষ্টি হয়। সুইচগুলির CPU এবং বাফার দ্রুত ওভারলোড হয়ে যায়, যার ফলে **সম্পূর্ণ নেটওয়ার্ক অচল** হয়ে পড়ে। STP এই লুপ সৃষ্টিকারী সংযোগগুলিকে **ব্লকড স্টেট**-এ রেখে নেটওয়ার্ককে স্থিতিশীল রাখে।

### প্রশ্ন ২: Root Bridge নির্বাচনের প্রক্রিয়া ব্যাখ্যা করুন এবং অ্যাডমিনিস্ট্রেটর হিসেবে আপনি কেন এটিকে ম্যানুয়ালি সেট করতে চাইবেন?

**উত্তর:**
* **নির্বাচন প্রক্রিয়া:**
    1.  **Bridge ID (Priority + MAC Address):** যে সুইচের Bridge ID (একটি অগ্রাধিকার মান এবং MAC অ্যাড্রেসের সমন্বয়) **সবচেয়ে কম**, সেটি Root Bridge হয়।
    2.  যদি Bridge ID একই হয়, তবে **সবচেয়ে কম MAC অ্যাড্রেস** সহ সুইচটি নির্বাচিত হয়।
* **ম্যানুয়াল সেটিং-এর কারণ:** নেটওয়ার্ক অ্যাডমিনিস্ট্রেটর ম্যানুয়ালি **সেন্ট্রাল, সবচেয়ে শক্তিশালী বা উচ্চ ব্যান্ডউইথ সংযোগযুক্ত** সুইচটিকে Root Bridge হিসেবে সেট করতে চান, যাতে ট্র্যাফিক **পূর্বনির্ধারিত এবং দ্রুততম পথ** অনুসরণ করে।

### প্রশ্ন ৩: ট্রাবলশুটিং-এর সময় ACL রুলগুলি কীভাবে কাজ করে তা জানা কেন গুরুত্বপূর্ণ?

**উত্তর:**
* **গুরুত্ব:** ACL রুলগুলি **উপর থেকে নীচে** কার্যকর হয় এবং একবার ম্যাচ পেলেই পরীক্ষা থামিয়ে দেয়।
* **সমস্যা:** যদি একটি **সাধারণ (General)** "Deny All" রুল, একটি **নির্দিষ্ট (Specific)** "Allow" রুলের উপরে থাকে, তবে Allow রুলটি কখনোই কার্যকর হবে না। ট্রাবলশুটিং-এর সময় প্রায়শই দেখা যায় যে কোনো ট্র্যাফিক সঠিকভাবে রাউট হওয়া সত্ত্বেও, **ভুল ক্রমে লেখা ACL**-এর কারণে ব্লক হয়ে যাচ্ছে।

### প্রশ্ন ৪: যদি একটি নতুন ডিভাইস নেটওয়ার্কে যুক্ত হওয়ার পরেও IP অ্যাড্রেস পায় কিন্তু একই VLAN-এর অন্য ডিভাইসের সাথে যোগাযোগ করতে না পারে, তবে প্রথম পদক্ষেপ কী হবে?

**উত্তর:** এটি একটি ক্লাসিক VLAN/ACL সমস্যা হতে পারে:
1.  **VLAN যাচাই:** প্রথম পদক্ষেপ হবে সুইচে লগইন করে ডিভাইসের সাথে সংযুক্ত **অ্যাক্সেস পোর্টটি কোন VLAN ID**-এর সাথে অ্যাসাইন করা আছে তা নিশ্চিত করা। নিশ্চিত করতে হবে যে ডিভাইসের প্রত্যাশিত নেটওয়ার্কটি সেই VLAN-এর সাথে মেলে কিনা।
2.  **STP অবস্থা:** যদি VLAN সঠিক হয়, তবে দেখতে হবে যে পোর্টটি **Forwarding State**-এ আছে কিনা।
3.  **ACL যাচাই:** যদি সব ঠিক থাকে, তবে সেই ইন্টারফেস বা তার রুটিং পথে কোনো **ACL** ট্র্যাফিক ব্লক করছে কিনা, তা পরীক্ষা করা।

---
---

## ১. রাউটিং টেবিল এবং সমস্যা সমাধান (Routing Table and Troubleshooting)

রাউটিং টেবিল হলো রাউটারের একটি মানচিত্র, যা ডেটাকে উৎস থেকে গন্তব্যে পৌঁছানোর জন্য **সেরা পরবর্তী হপ (Next Hop)** কোনটি হবে, তা নির্ধারণ করে।

### A. রাউটিং টেবিলের গুরুত্ব
* **দিকনির্দেশনা:** রাউটার এই টেবিলের দিকে তাকিয়ে ডেটাকে সঠিক ইন্টারফেসের মাধ্যমে গন্তব্যের দিকে ফরোয়ার্ড করে।
* **বিফলতা:** যদি কোনো নির্দিষ্ট নেটওয়ার্কে যাওয়ার কোনো পথ রাউটিং টেবিলে না থাকে, তবে রাউটার সেই ট্র্যাফিকটি **ড্রপ (Drop)** করে দেবে এবং অনেক ক্ষেত্রে **ICMP Host Unreachable** মেসেজ ফেরত পাঠাবে।
* **ট্রাবলশুটিং:** শুধু উৎস থেকে গন্তব্যের পথ নয়, **গন্তব্য থেকে উৎসে ফিরে আসার পথ** (Return Route) নিশ্চিত করার জন্য পথে থাকা **প্রতিটি রাউটারের** রাউটিং টেবিল পরীক্ষা করা আবশ্যক।

### B. ডিফল্ট গেটওয়ে এবং লাস্ট রিসর্ট (Default Gateway and Gateway of Last Resort)
* **উদ্দেশ্য:** বড় নেটওয়ার্কে প্রতিটি রুটের জন্য আলাদাভাবে এন্ট্রি না রেখে, রাউটিং টেবিলকে সংক্ষিপ্ত রাখা।
* **Gateway of Last Resort:** যদি রাউটিং টেবিলের কোনো রুটই ট্র্যাফিকের গন্তব্যের সাথে না মেলে, তবে **শেষ বিকল্প** হিসেবে যে রুটটি ব্যবহার করা হয়, সেটাই Gateway of Last Resort।
* **কনফিগারেশন:** এটিকে সাধারণত একটি **স্ট্যাটিক রুট (Static Route)** হিসেবে কনফিগার করা হয়, যার ডেস্টিনেশন অ্যাড্রেস হলো **0.0.0.0/0** (যা পৃথিবীর সমস্ত নেটওয়ার্ককে বোঝায়)। এই রুট সমস্ত অ-ম্যাচিং ট্র্যাফিককে একটি নির্দিষ্ট Next Hop-এ পাঠিয়ে দেয়।

---

## ২. আইপি অ্যাড্রেসিং ট্রাবলশুটিং (IP Addressing Troubleshooting)

নেটওয়ার্কে সংযোগ সমস্যা সমাধানের একটি বড় অংশ হলো IP অ্যাড্রেস সংক্রান্ত ত্রুটিগুলি ঠিক করা।

### A. DHCP অ্যাড্রেস শেষ হওয়া (Address Pool Exhaustion)
* **সমস্যা:** যখন DHCP সার্ভারের কাছে বিতরণ করার মতো আর কোনো **ফ্রি IP অ্যাড্রেস** থাকে না।
* **ফলাফল:** নতুন সংযুক্ত ডিভাইস একটি **APIPA (Automatic Private IP Addressing)** অ্যাড্রেস পায় (169.254.x.x রেঞ্জে)।
* **APIPA:** এটি একটি **নন-রাউটেবল অ্যাড্রেস**, অর্থাৎ এই অ্যাড্রেস দিয়ে লোকাল সাবনেটের বাইরে কোনো নেটওয়ার্কে যোগাযোগ করা যায় না।
* **সমাধান:**
    1.  DHCP সার্ভারে IP অ্যাড্রেস পুল পরীক্ষা করা এবং প্রয়োজনে বাড়ানো।
    2.  যদি ডিভাইসগুলি স্বল্প সময়ের জন্য সংযুক্ত হয়, তবে **Lease Time** (লিজের সময়কাল) কমিয়ে দেওয়া, যাতে IP অ্যাড্রেস দ্রুত মুক্ত হয়।
    3.  **IPAM (IP Address Management)** সফটওয়্যার ব্যবহার করে একাধিক DHCP সার্ভারের সমস্ত IP অ্যাড্রেস নিরীক্ষণ করা।

### B. ভুল বা ডুপ্লিকেট IP অ্যাড্রেস (Incorrect or Duplicate IP Address)

* **ভুল তথ্য:** DHCP সার্ভার থেকে ভুল IP, সাবনেট মাস্ক বা গেটওয়ে পেতে পারে।
    * **সমাধান:** নেটওয়ার্ক অ্যাডমিনিস্ট্রেটরের সাথে সঠিক মানগুলি নিশ্চিত করা, বা **প্যাকেট ক্যাপচার** করে স্থানীয় সাবনেটের অন্যান্য ডিভাইসগুলির কনফিগারেশন দেখা।
* **ডুপ্লিকেট IP অ্যাড্রেস:** একই IP অ্যাড্রেস যখন একাধিক ডিভাইস ব্যবহার করে।
    * **কারণ:**
        1.  একটি ডিভাইসকে **ম্যানুয়ালি (Static)** এমন একটি IP অ্যাড্রেস দেওয়া হয়েছে যা DHCP পুলে আছে।
        2.  একাধিক DHCP সার্ভারের মধ্যে **পুল ওভারল্যাপ (Overlap)** করেছে।
        3.  ভুলক্রমে অন্য একটি **অননুমোদিত DHCP সার্ভার** (Rogue DHCP) নেটওয়ার্কে IP বিতরণ করছে।
* **আধুনিক OS সুরক্ষা:** বেশিরভাগ আধুনিক অপারেটিং সিস্টেম সংযোগের সময় নিজেই IP ডুপ্লিকেশন শনাক্ত করতে পারে এবং ত্রুটি বার্তা প্রদর্শন করে।
* **ডুপ্লিকেট IP ট্রাবলশুটিং:**
    1.  সম্ভাব্য IP অ্যাড্রেসটিকে **পিং** করে দেখা যে কোনো ডিভাইস থেকে উত্তর আসে কিনা। উত্তর এলে সেই IP টি ব্যবহার করা যাবে না।
    2.  যদি উত্তর আসে, তবে **ARP টেবিল** চেক করে সেই IP-এর **MAC অ্যাড্রেস** বের করা।
    3.  সুইচের **MAC অ্যাড্রেস টেবিল** ব্যবহার করে সেই MAC অ্যাড্রেসটি কোন ফিজিক্যাল পোর্টের সাথে সংযুক্ত, তা খুঁজে বের করা।

---

## ৩. রিয়েল-টাইম ইন্টারভিউ প্রশ্নাবলী (Interview Perspective)

### প্রশ্ন ১: ট্রাবলশুটিং-এর সময় কেন আপনি শুধু উৎস থেকে গন্তব্যের পথ নয়, গন্তব্য থেকে উৎসের ফেরার পথও যাচাই করবেন?

**উত্তর:** এটি একটি সাধারণ ভুল। যোগাযোগ সফল হওয়ার জন্য **উভয় দিকে (Bi-directional)** রাউটিং প্রয়োজন। যদি ডেটা গন্তব্যে পৌঁছে যায়, কিন্তু গন্তব্য রাউটার জানে না যে উৎসে (Original Workstation) কীভাবে ফিরতে হয়, তবে এটি ট্র্যাফিক ড্রপ করবে। এর ফলে ব্যবহারকারী **কোনো উত্তর (Response)** পাবেন না এবং মনে হবে সংযোগ ব্যর্থ হয়েছে।

### প্রশ্ন ২: রাউটিং টেবিলে Gateway of Last Resort-এর ভূমিকা ব্যাখ্যা করুন। এটি কীভাবে কনফিগার করা হয়?

**উত্তর:**
* **ভূমিকা:** এটি একটি **ফেইল-সেফ (Fail-Safe)** বা **ডিফল্ট পথ**। যখন রাউটার কোনো ডেস্টিনেশন নেটওয়ার্কের জন্য কোনো সুনির্দিষ্ট রুট খুঁজে পায় না, তখন এটি সেই ট্র্যাফিককে Gateway of Last Resort-এর দিকে পাঠিয়ে দেয়।
* **কনফিগারেশন:** এটি **0.0.0.0/0** ডেস্টিনেশন অ্যাড্রেস ব্যবহার করে একটি **স্ট্যাটিক রুট** হিসেবে ম্যানুয়ালি কনফিগার করা হয়।

### প্রশ্ন ৩: যদি একজন ব্যবহারকারী APIPA (169.254.x.x) অ্যাড্রেস পান, তবে এর মূল কারণ কী হতে পারে?

**উত্তর:** APIPA পাওয়ার প্রধান কারণ হলো **DHCP সার্ভারের সাথে যোগাযোগ ব্যর্থ হওয়া**। এর প্রধান কারণগুলি হলো:
1.  **DHCP পুল শেষ:** DHCP সার্ভারে বিতরণ করার জন্য আর কোনো IP অ্যাড্রেস নেই (**Address Pool Exhaustion**)।
2.  **নেটওয়ার্ক সংযোগ সমস্যা:** DHCP সার্ভার এবং ক্লায়েন্টের মধ্যে ফিজিক্যাল বা VLAN সংযোগে সমস্যা।
3.  **DHCP সার্ভার ডাউন:** DHCP পরিষেবাটি চলছে না বা অ্যাক্সেসিবল নয়।

### প্রশ্ন ৪: নেটওয়ার্কে ডুপ্লিকেট IP অ্যাড্রেস সমস্যাটি আপনি কীভাবে ট্রাবলশুট করবেন?

**উত্তর:**
1.  **MAC অ্যাড্রেস বের করা:** প্রথমে সমস্যাযুক্ত IP অ্যাড্রেসটি **পিং** করা এবং তারপর **ARP টেবিল** দেখে সেই IP-এর সাথে সম্পর্কিত MAC অ্যাড্রেসটি বের করা।
2.  **পোর্ট শনাক্তকরণ:** সুইচে লগইন করে **MAC অ্যাড্রেস টেবিল** (বা CAM টেবিল) ব্যবহার করে MAC অ্যাড্রেসটি কোন **সুইচ পোর্টের** সাথে যুক্ত তা শনাক্ত করা।
3.  **উৎস চিহ্নিত করা:** এরপর সেই পোর্টে গিয়ে দেখা যে কোন ডিভাইসটি সংযুক্ত এবং সেটি ম্যানুয়ালি কনফিগার করা নাকি অননুমোদিত DHCP সার্ভার থেকে IP পেয়েছে।

---
---

